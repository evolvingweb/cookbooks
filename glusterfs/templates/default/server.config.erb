# Config for <%= @node[:fqdn] %>
# Generated by Chef

volume posix
	type storage/posix
	option directory <%= @node[:glusterfs][:server][:data_dir] %>
end-volume

volume locks
	type features/locks
	option mandatory-locks on
	subvolumes posix
end-volume

volume iothreads
	type performance/io-threads
	option thread-count 16
	subvolumes locks
end-volume

volume server-tcp
	type protocol/server
	subvolumes iothreads
	option transport-type tcp
	option auth.login.iothreads.allow <%= @node[:glusterfs][:server][:username] %>
	option auth.login.<%= @node[:glusterfs][:server][:username] %>.password <%= @node[:glusterfs][:server][:password] %>
	option transport.socket.listen-port <%= @node[:glusterfs][:server][:port] %>
	option transport.socket.nodelay on
end-volume
